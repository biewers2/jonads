<!DOCTYPE html><html class="default" lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>jonads</title><meta name="description" content="Documentation for jonads"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">jonads</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>jonads</h1></div><div class="tsd-panel tsd-typography"><a id="md:javascript-monads" class="tsd-anchor"></a><h1 class="tsd-anchor-link">J(avascript M)onads<a href="#md:javascript-monads" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>A set of monadic classes (&quot;Jonads&quot;) and utilities for writing clean, programmatically correct code.</p>
<a id="md:jonads-list" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Jonads List<a href="#md:jonads-list" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Jonads are simply Javascript classes that use inheritence and Typescript interfaces to create monadic structures for
implementing safety in error-prone code.</p>
<a id="md:either" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Either<a href="#md:either" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Either left or right. This Jonad represents one of two possible values. It is the base type of others that are similar
to it, such as <code>Result</code>.</p>
<p>There are two concrete types <code>Left</code> and <code>Right</code> that can be initialized like any other Javascript class, but implement
the <code>Either</code> interface. This jonad is useful for representing a single value that can be of two different variants, but
come with type-safety measure through the utility functions defined by the interface they implement.</p>
<a id="md:examples" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Examples<a href="#md:examples" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Working with values using <code>Either</code>.
<em>(Code is in javascript, but annotated with Typescript types)</em></p>
<pre><code class="javascript"><span class="hl-0">let</span><span class="hl-1"> </span><span class="hl-2">numericValue</span><span class="hl-1">; </span><span class="hl-3">// Either&lt;number, string&gt;</span><br/><br/><span class="hl-2">numericValue</span><span class="hl-1"> = </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-4">Left</span><span class="hl-1">(</span><span class="hl-5">3</span><span class="hl-1">);</span><br/><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">(</span><span class="hl-2">numericValue</span><span class="hl-1">.</span><span class="hl-4">isLeft</span><span class="hl-1">());</span><br/><span class="hl-3">// =&gt; true</span><br/><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">(</span><span class="hl-2">numericValue</span><span class="hl-1">.</span><span class="hl-4">leftOr</span><span class="hl-1">(</span><span class="hl-2">right</span><span class="hl-1"> </span><span class="hl-0">=&gt;</span><span class="hl-1"> </span><span class="hl-4">parseInt</span><span class="hl-1">(</span><span class="hl-2">right</span><span class="hl-1">)));</span><br/><span class="hl-3">// =&gt; 3</span><br/><br/><span class="hl-3">// ...</span><br/><br/><span class="hl-2">numericValue</span><span class="hl-1"> = </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-4">Right</span><span class="hl-1">(</span><span class="hl-6">&quot;5&quot;</span><span class="hl-1">);</span><br/><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">(</span><span class="hl-2">numericValue</span><span class="hl-1">.</span><span class="hl-4">isRight</span><span class="hl-1">());</span><br/><span class="hl-3">// =&gt; true</span><br/><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">(</span><span class="hl-2">numericValue</span><span class="hl-1">.</span><span class="hl-4">leftOr</span><span class="hl-1">(</span><span class="hl-2">right</span><span class="hl-1"> </span><span class="hl-0">=&gt;</span><span class="hl-1"> </span><span class="hl-4">parseInt</span><span class="hl-1">(</span><span class="hl-2">right</span><span class="hl-1">)));</span><br/><span class="hl-3">// =&gt; 5</span>
</code><button type="button">Copy</button></pre>

<a id="md:result" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Result<a href="#md:result" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Result represents a value or an error that can be associated with an attempt to resolve the value.</p>
<p>This is a subtype of <code>Either</code>, so it also has two concrete classes: <code>Ok</code> and <code>Err</code>.</p>
<a id="md:examples-1" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Examples<a href="#md:examples-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Working with values using <code>Result</code>.
<em>(Code is in javascript, but annotated with Typescript types)</em></p>
<pre><code class="javascript"><span class="hl-3">// getUser(id: number): Result&lt;User, GetUserError&gt;</span><br/><span class="hl-0">function</span><span class="hl-1"> </span><span class="hl-4">getUser</span><span class="hl-1">(</span><span class="hl-2">id</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-7">try</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-8">user</span><span class="hl-1"> = </span><span class="hl-2">db</span><span class="hl-1">.</span><span class="hl-4">find</span><span class="hl-1">(</span><span class="hl-2">id</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-7">return</span><span class="hl-1"> </span><span class="hl-4">Ok</span><span class="hl-1">(</span><span class="hl-2">user</span><span class="hl-1">);</span><br/><span class="hl-1">    } </span><span class="hl-7">catch</span><span class="hl-1"> (</span><span class="hl-2">e</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-7">return</span><span class="hl-1"> </span><span class="hl-4">Err</span><span class="hl-1">(</span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-4">GetUserError</span><span class="hl-1">(</span><span class="hl-6">`failed to get user: </span><span class="hl-0">${</span><span class="hl-2">e</span><span class="hl-9">.</span><span class="hl-2">message</span><span class="hl-0">}</span><span class="hl-6">`</span><span class="hl-1">))</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-0">let</span><span class="hl-1"> </span><span class="hl-2">result</span><span class="hl-1">; </span><span class="hl-3">// Result&lt;User, GetUserError&gt;</span><br/><br/><span class="hl-2">result</span><span class="hl-1"> = </span><span class="hl-4">getUser</span><span class="hl-1">(</span><span class="hl-5">1</span><span class="hl-1">);</span><br/><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">(</span><span class="hl-2">result</span><span class="hl-1">.</span><span class="hl-4">isOk</span><span class="hl-1">());</span><br/><span class="hl-3">// =&gt; true</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-8">newResult</span><span class="hl-1"> = </span><span class="hl-2">result</span><span class="hl-1">.</span><span class="hl-4">map</span><span class="hl-1">(</span><span class="hl-2">user</span><span class="hl-1"> </span><span class="hl-0">=&gt;</span><span class="hl-1"> </span><span class="hl-2">user</span><span class="hl-1">.</span><span class="hl-2">name</span><span class="hl-1">);</span><br/><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">(</span><span class="hl-2">newResult</span><span class="hl-1">);</span><br/><span class="hl-3">// =&gt; Ok(&quot;John&quot;)</span><br/><br/><span class="hl-3">// ...</span><br/><br/><span class="hl-2">result</span><span class="hl-1"> = </span><span class="hl-4">getUser</span><span class="hl-1">(-</span><span class="hl-5">1</span><span class="hl-1">).</span><span class="hl-4">map</span><span class="hl-1">(</span><span class="hl-2">user</span><span class="hl-1"> </span><span class="hl-0">=&gt;</span><span class="hl-1"> </span><span class="hl-2">user</span><span class="hl-1">.</span><span class="hl-2">name</span><span class="hl-1">);</span><br/><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">(</span><span class="hl-2">result</span><span class="hl-1">.</span><span class="hl-4">isErr</span><span class="hl-1">());</span><br/><span class="hl-3">// =&gt; true</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-8">name</span><span class="hl-1"> = </span><span class="hl-2">result</span><span class="hl-1">.</span><span class="hl-4">valueOr</span><span class="hl-1">(</span><span class="hl-6">&quot;unknown&quot;</span><span class="hl-1">);</span><br/><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">(</span><span class="hl-2">name</span><span class="hl-1">);</span><br/><span class="hl-3">// =&gt; &quot;unknown&quot;</span>
</code><button type="button">Copy</button></pre>

<a id="md:working-with-jonads" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Working with Jonads<a href="#md:working-with-jonads" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Jonads are useful as they exist in their concrete class forms, but they can be tedious to work with if a set of utility
functions aren't supplied.</p>
<a id="md:do-notation-and-results" class="tsd-anchor"></a><h3 class="tsd-anchor-link">&quot;Do-notation&quot; and Results<a href="#md:do-notation-and-results" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>There's a concept in Haskell called &quot;do-notation&quot;. Effectively, this notation allows Haskell to extract the side-effects
from function/service calls (for us, <code>Err</code> in a <code>Result</code>) and focus primarily on the happy-path values.</p>
<p>To recreate this notation, the <code>doing</code> function can be used to run a sequence of services that return &quot;results&quot;.
By calling this function at the top of any function, and passing the actual function logic to it through a callback, <code>doing</code>
can capture any thrown errors into <code>Err</code> values and allow you, the developer, to extract the side-effects away from the function's
logic via a call to the provided <code>bind</code> function.</p>
<a id="md:examples-2" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Examples<a href="#md:examples-2" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Let's say you want to define a new service to get the name of a workspace a user is associated with.</p>
<p>You already have two services defined to get the User and Workspace records by ID. These database calls can fail for
numerous reasons, but the new service you're trying to define has no concern with handling errors and wants to
propagate them to the caller.</p>
<pre><code class="javascript"><span class="hl-3">// Existing services:</span><br/><span class="hl-3">//   getUser(id: number): Result&lt;User, GetUserError&gt;</span><br/><span class="hl-3">//   getWorkspace(id: number): Result&lt;Workspace, GetWorkspaceError&gt;</span><br/><br/><span class="hl-3">// getUserWorkspaceName(userId: number): Result&lt;string, DatabaseError&gt;</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-4">getUserWorkspaceName</span><span class="hl-1"> = (</span><span class="hl-2">userId</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> </span><span class="hl-4">doing</span><span class="hl-1">(</span><span class="hl-2">bind</span><span class="hl-1"> </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-8">user</span><span class="hl-1"> = </span><span class="hl-4">bind</span><span class="hl-1">(</span><span class="hl-4">getUser</span><span class="hl-1">(</span><span class="hl-2">userId</span><span class="hl-1">));</span><br/><span class="hl-1">    </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-8">workspace</span><span class="hl-1"> = </span><span class="hl-4">bind</span><span class="hl-1">(</span><span class="hl-4">getWorkspace</span><span class="hl-1">(</span><span class="hl-2">user</span><span class="hl-1">.</span><span class="hl-2">workspaceId</span><span class="hl-1">));</span><br/><span class="hl-1">    </span><span class="hl-7">return</span><span class="hl-1"> </span><span class="hl-2">workspace</span><span class="hl-1">.</span><span class="hl-2">name</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<p>Although <code>doing</code> captures any thrown exceptions in a <code>Result</code> as <code>Err</code>s, there may be simpler cases where you would only
want to capture specific (or any) execption from a single function call that may not return a result. You can do this
using <code>trying</code> and <code>tryCatching</code>.</p>
<pre><code class="javascript"><span class="hl-0">class</span><span class="hl-1"> </span><span class="hl-10">NonSingleDigitError</span><span class="hl-1"> </span><span class="hl-0">extends</span><span class="hl-1"> </span><span class="hl-10">Error</span><span class="hl-1"> {}</span><br/><br/><span class="hl-0">function</span><span class="hl-1"> </span><span class="hl-4">onlySingleDigit</span><span class="hl-1">(</span><span class="hl-2">value</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-7">if</span><span class="hl-1"> (</span><span class="hl-2">value</span><span class="hl-1"> &lt; -</span><span class="hl-5">9</span><span class="hl-1"> || </span><span class="hl-2">value</span><span class="hl-1"> &gt; </span><span class="hl-5">9</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-7">throw</span><span class="hl-1"> </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-4">NonSingleDigitError</span><span class="hl-1">();</span><br/><span class="hl-1">    } </span><span class="hl-7">else</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-7">return</span><span class="hl-1"> </span><span class="hl-2">value</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">(</span><span class="hl-4">trying</span><span class="hl-1">(() </span><span class="hl-0">=&gt;</span><span class="hl-1"> </span><span class="hl-4">onlySingleDigit</span><span class="hl-1">(</span><span class="hl-5">3</span><span class="hl-1">)));</span><br/><span class="hl-3">// =&gt; Ok(3)</span><br/><br/><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">(</span><span class="hl-4">trying</span><span class="hl-1">(() </span><span class="hl-0">=&gt;</span><span class="hl-1"> </span><span class="hl-4">onlySingleDigit</span><span class="hl-1">(</span><span class="hl-5">10</span><span class="hl-1">)));</span><br/><span class="hl-3">// =&gt; Err(NonSingleDigitError)</span><br/><br/><span class="hl-3">// ...</span><br/><br/><span class="hl-0">class</span><span class="hl-1"> </span><span class="hl-10">NegativeNumberError</span><span class="hl-1"> </span><span class="hl-0">extends</span><span class="hl-1"> </span><span class="hl-10">Error</span><span class="hl-1"> {}</span><br/><br/><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">(</span><span class="hl-4">tryCatching</span><span class="hl-1">([</span><span class="hl-2">NegativeNumberError</span><span class="hl-1">], () </span><span class="hl-0">=&gt;</span><span class="hl-1"> </span><span class="hl-4">onlySingleDigit</span><span class="hl-1">(-</span><span class="hl-5">10</span><span class="hl-1">)));</span><br/><span class="hl-3">// throws `NonSingleDigitError`.</span>
</code><button type="button">Copy</button></pre>

</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:javascript-monads"><span>J(avascript <wbr/>M)onads</span></a><ul><li><a href="#md:jonads-list"><span>Jonads <wbr/>List</span></a></li><li><ul><li><a href="#md:either"><span>Either</span></a></li><li><ul><li><a href="#md:examples"><span>Examples</span></a></li></ul></li><li><a href="#md:result"><span>Result</span></a></li><li><ul><li><a href="#md:examples-1"><span>Examples</span></a></li></ul></li></ul></li><li><a href="#md:working-with-jonads"><span>Working with <wbr/>Jonads</span></a></li><li><ul><li><a href="#md:do-notation-and-results"><span>&quot;<wbr/>Do-<wbr/>notation&quot; and <wbr/>Results</span></a></li><li><ul><li><a href="#md:examples-2"><span>Examples</span></a></li></ul></li></ul></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>jonads</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
